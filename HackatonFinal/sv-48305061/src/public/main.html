<!-- Cliente -->
<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
  <title>Navbar</title>
</head>

<body>

  <ul class="navbar-nav ml-auto">
    <li class="nav-item">
      <a href="/login" class="nav-link">login</a>
    </li>
    <li class="nav-item">
      <a href="/registro" class="nav-link">Registro</a>
    </li>
  </ul>
  <h1>Mis Productos</h1>
  <ul id="producto"></ul>

  <script>
    $(document).ready(function () {
      // Realizar una solicitud GET a la ruta que devuelve los productos
      $.get('/productos', function (data) {  // Corregido aquí
        // Recorrer los datos recibidos
        data.forEach(function (productos) {
          // Crear un elemento <li> con el nombre, el precio y la imagen del producto
          let li = $('<li>');
          li.html(productos.nombre + ' - ' + productos.precio + ' - ');

          // Agregar la etiqueta de imagen
          let img = $('<img>');
          img.attr('src', productos.imagen);
          img.attr('alt', productos.nombre);
          img.css({ 'width': '50px', 'height': '50px' });
          li.append(img);

          // Añadir el elemento <li> al <ul>
          $('#producto').append(li);
        });
      }).fail(function (error) {
        console.error('Error en la solicitud AJAX:', error);
      });
    });
  </script>

</body>

</html>
